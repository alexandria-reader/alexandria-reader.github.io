<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.92.0">
<meta name=generator content="Relearn 2.9.2
">
<meta name=description content="Design notes from development of the Alexandria language learning app.">
<meta name=author content="Team Alexandria">
<title>Automating Tests :: Alexandria Case Study</title>
<link href=../../css/nucleus.css?1643135367 rel=stylesheet>
<link href=../../css/fontawesome-all.min.css?1643135367 rel=stylesheet>
<link href=../../css/featherlight.min.css?1643135367 rel=stylesheet>
<link href=../../css/perfect-scrollbar.min.css?1643135367 rel=stylesheet>
<link href=../../css/auto-complete.css?1643135367 rel=stylesheet>
<link href=../../css/theme.css?1643135367 rel=stylesheet>
<link href=../../css/theme-alexandria.css?1643135367 rel=stylesheet>
<link href=../../css/variant.css?1643135367 rel=stylesheet>
<link href=../../css/print.css?1643135367 rel=stylesheet media=print>
<script src=../../js/jquery.min.js?1643135367></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code.copy-to-clipboard-inline+span.copy-to-clipboard{display:none}:not(pre)>code.copy-to-clipboard-inline{border-bottom-right-radius:2px;border-top-right-radius:2px;border-right-width:1px}</style>
</head>
<body data-url=../../challenges/automated-tests/>
<script>var index_url="../../index.json",root_url="../../",baseUri=root_url.replace(/\/$/,'')</script>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a href=../../><img src=../../images/logo-light.png alt="Alexandria logo"></a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script src=../../js/lunr.min.js?1643135367></script>
<script src=../../js/auto-complete.js?1643135367></script>
<script src=../../js/search.js?1643135367></script>
</div>
<div id=homelinks>
<ul>
<li>
<a class=padding href=../../><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/competitors/ title="Competitor Analysis" class=dd-item><a href=../../competitors/>Competitor Analysis</a><ul></ul></li>
<li data-nav-id=/decisions/ title="Technical Decisions" class="dd-item alwaysopen"><a href=../../decisions/>Technical Decisions</a><ul>
<li data-nav-id=/decisions/typescript/ title="Choosing TypeScript" class=dd-item><a href=../../decisions/typescript/>Choosing TypeScript</a></li>
<li data-nav-id=/decisions/sql/ title="SQL or NoSQL?" class=dd-item><a href=../../decisions/sql/>SQL or NoSQL?</a></li>
<li data-nav-id=/decisions/backend/ title="3 Layers for the Back End" class=dd-item><a href=../../decisions/backend/>3 Layers for the Back End</a></li>
<li data-nav-id=/decisions/react-recoil/ title="React and Recoil" class=dd-item><a href=../../decisions/react-recoil/>React and Recoil</a></li></ul></li>
<li data-nav-id=/database-api/ title="Database and API" class="dd-item alwaysopen"><a href=../../database-api/>Database and API</a><ul>
<li data-nav-id=/database-api/database/ title="Database Architecture" class=dd-item><a href=../../database-api/database/>Database Architecture</a></li>
<li data-nav-id=/database-api/api/ title="API Design" class=dd-item><a href=../../database-api/api/>API Design</a></li></ul></li>
<li data-nav-id=/challenges/ title="Challenges and Solutions" class="dd-item parent alwaysopen"><a href=../../challenges/>Challenges and Solutions</a><ul>
<li data-nav-id=/challenges/automated-tests/ title="Automating Tests" class="dd-item active"><a href=../../challenges/automated-tests/>Automating Tests</a></li>
<li data-nav-id=/challenges/text-parsing/ title="Text Parsing" class=dd-item><a href=../../challenges/text-parsing/>Text Parsing</a></li>
<li data-nav-id=/challenges/phrase-selection/ title="Phrase selection UI" class=dd-item><a href=../../challenges/phrase-selection/>Phrase selection UI</a></li></ul></li>
<li data-nav-id=/future/ title="MVP and Future Plans" class=dd-item><a href=../../future/>MVP and Future Plans</a><ul></ul></li>
<li data-nav-id=/references/ title=References class=dd-item><a href=../../references/>References</a><ul></ul></li>
</ul>
<div id=shortcuts>
<div class=nav-title>More</div>
<ul>
<li><a class=padding href=https://tryalexandria.com><i class="fas fa-fw fa-book"></i> Use the app, learn a language!</a></li>
<li><a class=padding href=https://github.com/alexandria-reader><i class="fab fa-fw fa-github"></i> Alexandria on GitHub</a></li>
</ul>
</div>
<div id=footer>
<p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p>
</div>
</div>
</nav>
<div id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div id=top-bar>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
Automating Tests
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#docker-image-to-maintain-test-reliability>Docker image to maintain test reliability</a></li>
<li><a href=#github-action-to-automating-testing>Github action to automating testing</a></li>
</ul>
</nav>
</div>
</div>
</div>
<div id=head-tags>
</div>
<main id=body-inner>
<h1>Automating Tests</h1>
<p>One challenge we faced early on when implementing the back end and database, was how the testing of pull requests could be automated.</p>
<h2 id=docker-image-to-maintain-test-reliability>Docker image to maintain test reliability</h2>
<p>After implementing the first few unit tests, we were confronted with the inefficiency of having to manually test routes using Postman when reviewing a PR. Given the project&rsquo;s likely growth in both size and scope, this was not a sustainable solution.</p>
<p>Another challenge related to testing arose, this time related to maintaining the fidelity of the testing database. A good level of test coverage using Jest was achieved quickly, but with each team member using their own local testing database, the outcomes were not always reliable. To enforce testing reliability and control, the database needed to maintain a known state.</p>
<p>To achieve this objective, we implemented a PostgreSQL Docker image that would automatically spin up a Docker instance, set up and seed the database each time tests were run. One of the inherent advantages of using a Docker image is that unless explicitly set up, data does not persist after the Docker instance is shut down. We were able to take advantage of this property to avoid having to reset the database before running tests. This made the testing process more reliable and easier to control.</p>
<h2 id=github-action-to-automating-testing>Github action to automating testing</h2>
<p>To review a pull request, a reviewer would download the PR branch, run the test suite manually to ensure there had been no regression. Given the frequency of code changes and speed of development, we decided to implement automated testing to speed up the process, and make reviewers' job easier.</p>
<p>After some investigation, we settled on implementing GitHub Actions. We pointed automated tests on GitHub to the same PostgreSQL Docker image, seeded it with data as we would using on our local machines. As Alexandria&rsquo;s code was already hosted on Github, this greatly simplified the review process. As tests results became available, they were displayed prominently on the PR, and the team was notified immediately should a problem arise.</p>
<p>This workflow greatly simplified the pull request and review process, saving us significant time in catching new bugs or dealing with regression issues.</p>
<footer class=footline>
</footer>
</main>
</div>
<div id=navigation>
<a class="nav nav-prev" href=../../challenges/ title="Challenges and Solutions"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../challenges/text-parsing/ title="Text Parsing"><i class="fa fa-chevron-right"></i></a>
</div>
</div>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=../../js/clipboard.min.js?1643135367></script>
<script src=../../js/perfect-scrollbar.min.js?1643135367></script>
<script src=../../js/perfect-scrollbar.jquery.min.js?1643135367></script>
<script src=../../js/jquery.svg.pan.zoom.js?1643135367></script>
<script src=../../js/featherlight.min.js?1643135367></script>
<script src=../../js/modernizr.custom-3.6.0.js?1643135367></script>
<script src=../../js/mermaid.min.js?1643135367></script>
<script>typeof mermaid!='undefined'&&typeof mermaid.mermaidAPI!='undefined'&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script>
<script src=../../js/relearn.js?1643135367></script>
</body>
</html>